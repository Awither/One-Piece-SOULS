<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Soul-Soul Fruit Workshop</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>

  <!-- Error Banner -->
  <div id="app-error-banner" class="error-banner hidden">
    <span id="app-error-text">An unexpected error occurred.</span>
    <button id="app-error-close">✕</button>
  </div>

  <header class="app-header">
    <h1>Soul-Soul Fruit Control Panel</h1>
    <p>Fear Extraction • Homie Creation • Territory Forging • AI Workshops</p>
  </header>

  <main class="container">

    <!-- ================================= -->
    <!-- PANEL 1 — Soul Rating & Soul Bank -->
    <!-- ================================= -->
    <section class="panel">
      <h2>PANEL 1 — Soul Rating & Soul Bank</h2>

      <!-- Soul Input -->
      <div class="subpanel">
        <h3>Core Soul Rating (No Math Brain Required)</h3>

        <label>Creature Name</label>
        <input id="soul-name" placeholder="Ex: Terrified Marine Captain" />

        <label>Raw Might (1–10)</label>
        <input id="soul-might" type="number" min="1" max="10" value="5" />

        <label>Proficiency Tier (0–9)</label>
        <select id="soul-tier">
          <option value="0">0 – Untrained (civilian / fodder)</option>
          <option value="1">1 – Basic Training (rookie marine)</option>
          <option value="2">2 – Seasoned Fighter</option>
          <option value="3">3 – Veteran Marine</option>
          <option value="4">4 – Elite Marine / Rear Admiral</option>
          <option value="5">5 – Admiral</option>
          <option value="6">6 – Vice Admiral</option>
          <option value="7">7 – Yonko</option>
          <option value="8">8 – Gorosei</option>
          <option value="9">9 – Beyond Mortal Limits</option>
        </select>

        <label>Willpower Level (1–10)</label>
        <input id="soul-will" type="number" min="1" max="10" value="5" />

        <hr />

        <div class="result-line">
          <span>Combined Soul Rating:</span>
          <span id="soul-rating">0</span>
        </div>

        <div class="result-line">
          <span>Soul Level (SoL):</span>
          <span id="soul-level">1</span>
        </div>

        <div class="result-line">
          <span>Soul Energy (SPU):</span>
          <span id="soul-spu">0</span>
        </div>

        <div class="result-line">
          <span>Suggested Max HP Lost:</span>
          <span id="soul-hp">0</span>
        </div>

        <label>Traits / Tags (optional)</label>
        <input id="soul-tags" placeholder="Ex: cowardly, marine, zealot..." />

        <label>Soul Notes</label>
        <textarea id="soul-notes"></textarea>

        <div class="button-row">
          <button id="btn-recalc-soul" class="btn-primary">Recalculate Soul Rating</button>
          <button id="btn-add-soul" class="btn-secondary">Add Soul to Bank</button>
        </div>

      </div>

      <!-- Soul Bank -->
      <div class="subpanel">
        <h3>Soul Bank</h3>
        <p>All harvested souls appear here.</p>

        <label>Filter by name / trait</label>
        <input id="soul-filter" placeholder="Search souls..." />

        <div id="soul-bank-list" class="listed-items"></div>
      </div>
    </section>

    <!-- ===================== -->
    <!-- PANEL 2 — Homies -->
    <!-- ===================== -->
    <section class="panel">
      <h2>PANEL 2 — Homies</h2>

      <div class="subpanel">
        <h3>Create a Homie</h3>

        <label>Homie Name</label>
        <input id="homie-name" placeholder="Ex: Prometheus, Zephyr Gatekeeper" />

        <label>Homie Type</label>
        <select id="homie-type">
          <option>Minor Homie (tools, plants, toys)</option>
          <option>Territory Homie</option>
          <option>Buff Homie</option>
          <option>Signature Homie</option>
        </select>

        <label>Linked Soul (optional)</label>
        <select id="homie-linked-soul"></select>

        <label>Initial SPU Investment</label>
        <input id="homie-spu" type="number" min="0" value="5" />

        <label>Role / Concept</label>
        <input id="homie-role" placeholder="Ex: front-line bruiser, healer..." />

        <label>HP (Signature homies only)</label>
        <input id="homie-hp" placeholder="Ex: 85 (10d8+30)" />

        <label>AC</label>
        <input id="homie-ac" placeholder="Ex: 17 (soul armor)" />

        <label>Movement</label>
        <input id="homie-move" placeholder="Ex: 30 ft., fly 40 ft." />

        <label>Primary Damage / Attack</label>
        <input id="homie-attack" placeholder="Ex: 2d10 fire, 3d8 lightning..." />

        <label>Homie Abilities</label>
        <textarea id="homie-abilities"></textarea>

        <label>Personality Traits</label>
        <input id="homie-personality" placeholder="Ex: arrogant, gluttonous..." />

        <label>Bound Location (for Territory Homies)</label>
        <input id="homie-location" placeholder="Ex: Southern Gate of Monthland" />

        <label>Assigned Domain</label>
        <select id="homie-domain"></select>

        <label>Territory Actions</label>
        <textarea id="homie-territory-actions"></textarea>

        <label>Buff / Support Effects</label>
        <textarea id="homie-support"></textarea>

        <button id="btn-create-homie" class="btn-primary">Create Homie</button>
      </div>

      <!-- Homie Roster -->
      <div class="subpanel">
        <h3>Homie Roster & Upgrades</h3>

        <label>Filter Homies</label>
        <input id="homie-filter" placeholder="Search homies..." />

        <div id="homie-roster" class="listed-items"></div>

        <h3>AI Homie Attack Forge</h3>

        <label>Target Homie</label>
        <select id="ai-homie-target"></select>

        <label>Attack Concept</label>
        <textarea id="ai-homie-concept"></textarea>

        <label>Effect Types</label>
        <div class="checkbox-group">
          <label><input type="checkbox" class="ai-homie-type" value="Offense" /> Offense</label>
          <label><input type="checkbox" class="ai-homie-type" value="Defense" /> Defense</label>
          <label><input type="checkbox" class="ai-homie-type" value="Support" /> Support</label>
          <label><input type="checkbox" class="ai-homie-type" value="Control" /> Control</label>
          <label><input type="checkbox" class="ai-homie-type" value="Utility" /> Utility</label>
          <label><input type="checkbox" class="ai-homie-type" value="Reality-Bending" /> Reality-Bending</label>
        </div>

        <label>Power Level (1–10)</label>
        <input id="ai-homie-power" type="number" min="1" max="10" value="7" />

        <button id="btn-generate-homie-attack" class="btn-secondary">Generate Attack (AI)</button>

        <div id="ai-homie-output" class="ai-output"></div>
      </div>
    </section>

    <!-- =============================== -->
    <!-- PANEL 3 — Domains & Territories -->
    <!-- =============================== -->

    <section class="panel">
      <h2>PANEL 3 — Domains & Territories</h2>

      <!-- Create Domain -->
      <div class="subpanel">
        <h3>Create a Domain</h3>

        <label>Domain Name</label>
        <input id="domain-name" placeholder="Ex: Totto Land: Candy Coast" />

        <label>Domain Tier (1–10)</label>
        <input id="domain-tier" type="number" min="1" max="10" value="3" />

        <label>SPU Invested into Domain</label>
        <input id="domain-spu" type="number" min="0" value="10" />

        <label>Territory Size / Range</label>
        <input id="domain-range" placeholder="Ex: 5-mile radius around the throne" />

        <label>Passive Fear DC</label>
        <input id="domain-dc" type="number" min="0" max="40" value="15" />

        <label>Environmental Personality</label>
        <textarea id="domain-personality"></textarea>

        <label>Lair Actions (manual or AI-written)</label>
        <textarea id="domain-lairs"></textarea>

        <label>Domain Notes</label>
        <textarea id="domain-notes"></textarea>

        <label>Assign Territory Homies</label>
        <select id="domain-homies" multiple></select>

        <button id="btn-create-domain" class="btn-primary">Create Domain</button>
      </div>

      <!-- Domain Overview -->
      <div class="subpanel">
        <h3>Domains Overview</h3>

        <label>Filter Domains</label>
        <input id="domain-filter" placeholder="Search domains..." />

        <div id="domain-list" class="listed-items"></div>
      </div>
    </section>

    <!-- ============================= -->
    <!-- PANEL 5 — Ability Cards (AI) -->
    <!-- ============================= -->

    <section class="panel">
      <h2>PANEL 5 — Ability Cards (Manual & AI)</h2>

      <div class="subpanel">
        <h3>Create / Forge Ability</h3>

        <label>Ability Name</label>
        <input id="ability-name" placeholder="Ex: Soul-Storm Judgment" />

        <label>Assign To</label>
        <select id="ability-target"></select>

        <label>Action Type</label>
        <input id="ability-action" placeholder="Ex: Action, Bonus Action..." />

        <label>Range</label>
        <input id="ability-range" placeholder="Ex: Self, 30 ft., 60 ft. cone..." />

        <label>Target</label>
        <input id="ability-target-info" placeholder="Ex: Single creature, 3 creatures..." />

        <label>Save / DC</label>
        <input id="ability-dc" placeholder="Ex: Wis save vs. DC 18..." />

        <label>Damage Dice</label>
        <input id="ability-damage" placeholder="Ex: 6d10 necrotic + 4d8 thunder" />

        <label>Ability Power Level (1–10)</label>
        <input id="ability-power" type="number" min="1" max="10" value="7" />

        <label>Soul Energy Used (optional)</label>
        <input id="ability-soulcost" type="number" value="0" />

        <label>Effect Types</label>
        <div class="checkbox-group">
          <label><input type="checkbox" class="ability-type" value="Offense" /> Offense</label>
          <label><input type="checkbox" class="ability-type" value="Defense" /> Defense</label>
          <label><input type="checkbox" class="ability-type" value="Support" /> Support</label>
          <label><input type="checkbox" class="ability-type" value="Control" /> Control</label>
          <label><input type="checkbox" class="ability-type" value="Utility" /> Utility</label>
          <label><input type="checkbox" class="ability-type" value="Reality-Bending" /> Reality-Bending</label>
        </div>

        <label>Effect Notes</label>
        <textarea id="ability-effect-notes"></textarea>

        <label>Desired Outcome / Ability Shape</label>
        <div class="checkbox-group">
          <label><input type="checkbox" class="ability-outcome" value="Barrier" /> Barrier / Shield</label>
          <label><input type="checkbox" class="ability-outcome" value="Restrain" /> Restrain / Bind</label>
          <label><input type="checkbox" class="ability-outcome" value="Area Denial" /> Area Denial / Zone</label>
          <label><input type="checkbox" class="ability-outcome" value="Morphing" /> Morphing / Weapon Form</label>
          <label><input type="checkbox" class="ability-outcome" value="Overcharge" /> Overcharge / Self-Buff</label>
          <label><input type="checkbox" class="ability-outcome" value="Mobility" /> Mobility / Escape</label>
          <label><input type="checkbox" class="ability-outcome" value="Debuff" /> Debuff / Weakening</label>
          <label><input type="checkbox" class="ability-outcome" value="Explosion" /> Explosion / Burst</label>
          <label><input type="checkbox" class="ability-outcome" value="High Damage" /> High Damage</label>
          <label><input type="checkbox" class="ability-outcome" value="Battlefield Control" /> Battlefield Control</label>
          <label><input type="checkbox" class="ability-outcome" value="Signature Finisher" /> Signature Finisher</label>
        </div>

        <label>Outcome / Effect Notes</label>
        <textarea id="ability-outcome-notes"></textarea>

        <label>Mechanical Effect</label>
        <textarea id="ability-mechanical"></textarea>

        <label>Combo / Interaction Notes</label>
        <textarea id="ability-combo"></textarea>

        <div class="button-row">
          <button id="btn-ability-manual" class="btn-primary">Create Ability Manually</button>
          <button id="btn-ability-ai" class="btn-secondary">Generate via AI</button>
        </div>
      </div>

      <div class="subpanel">
        <h3>Ability List</h3>

        <label>Filter Abilities</label>
        <input id="ability-filter" placeholder="Search abilities..." />

        <div id="ability-list" class="listed-items"></div>
      </div>

    </section>

  </main>

  <script src="script.js"></script>
</body>
</html>
