<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Soul-Soul Fruit Workshop</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
</head>

<body>

<!-- GLOBAL ERROR BANNER -->
<div id="app-error-banner" class="error-banner hidden">
    <span id="app-error-text"></span>
    <button id="app-error-close">X</button>
</div>

<header class="app-header">
    <div class="header-title">
        <h1>Soul-Soul Fruit Control Panel</h1>
        <p>Big Mom–style soul harvesting, homie crafting, domain shaping, and ability forging.</p>
    </div>
</header>

<main class="container">

<!-- ------------------------------------------------------------
     PANEL 1 — SOUL RATING + SOUL BANK
------------------------------------------------------------ -->
<div class="panel" data-panel="1">
    <h2>Panel 1 – Soul Rating & Soul Bank</h2>

    <div class="subpanel">
        <h3>Core Soul Rating</h3>

        <label>Creature Name</label>
        <input id="soul-name" placeholder="Ex: Kaido" />

        <label>Raw Might (1–10)</label>
        <input id="soul-might" type="number" min="1" max="10"/>

        <label>Proficiency Tier (0–9)</label>
        <select id="soul-tier">
            <option value="0">0 – Civilian</option>
            <option value="1">1 – Rookie</option>
            <option value="2">2 – Pirate</option>
            <option value="3">3 – Veteran</option>
            <option value="4">4 – Elite</option>
            <option value="5">5 – Warlord</option>
            <option value="6">6 – Commander</option>
            <option value="7">7 – Yonko</option>
            <option value="8">8 – Legend</option>
            <option value="9">9 – Mythic</option>
        </select>

        <label>Willpower Level (1–10)</label>
        <input id="soul-will" type="number" min="1" max="10"/>

        <label>Traits / Tags</label>
        <input id="soul-tags" placeholder="Ex: stubborn, marine, beastly" />

        <label>Soul Notes</label>
        <textarea id="soul-notes" placeholder="Flavor notes, personality, backstory…"></textarea>

        <div class="divider"></div>

        <p><strong>Combined Rating:</strong> <span id="soul-rating">0</span></p>
        <p><strong>Level (SoL):</strong> <span id="soul-level">0</span></p>
        <p><strong>Soul Energy (SPU):</strong> <span id="soul-spu">0</span></p>
        <p><strong>Suggested Max HP Lost:</strong> <span id="soul-hp">0</span></p>

        <button id="btn-recalc-souls" class="btn">Recalculate Soul Rating</button>
        <button id="btn-add-soul" class="btn-secondary">Add Soul to Bank</button>
    </div>

    <div class="subpanel">
        <h3>Soul Bank</h3>

        <input id="soul-filter" placeholder="Search souls…" />

        <div id="soul-bank-list"></div>
    </div>
</div>

<!-- ------------------------------------------------------------
     PANEL 2 — HOMIES (Creation Only)
------------------------------------------------------------ -->
<div class="panel" data-panel="2">
    <h2>Panel 2 – Homies (Creation)</h2>

    <div class="subpanel">
        <h3>Create a Homie</h3>

        <label>Homie Name</label>
        <input id="homie-name" placeholder="Ex: Panther" />

        <label>Homie Type</label>
        <select id="homie-type">
            <option>Signature Homie</option>
            <option>Combat Homie</option>
            <option>Utility Homie</option>
            <option>Territory Homie</option>
        </select>

        <label>Linked Soul</label>
        <select id="homie-linked-soul"></select>

        <label>Initial SPU Investment</label>
        <input id="homie-spu" type="number" placeholder="Ex: 500" />

        <label>Role / Concept</label>
        <input id="homie-role" placeholder="Support, Offense, Tank…" />

        <label>HP</label>
        <input id="homie-hp" type="number" />

        <label>AC</label>
        <input id="homie-ac" type="number" />

        <label>Move Speed</label>
        <input id="homie-move" type="number" />

        <label>Primary Attack</label>
        <input id="homie-attack" placeholder="Ex: 1d12 slashing" />

        <label>Personality Traits</label>
        <input id="homie-personality" placeholder="Ex: jealous, gluttonous…" />

        <label>Bound Location (territory homies)</label>
        <input id="homie-location" placeholder="Ex: Southern Gate of Montblanc City" />

        <div class="divider"></div>

        <button id="btn-create-homie" class="btn-secondary">Create Homie</button>
    </div>

    <div class="subpanel">
        <h3>Homie Roster</h3>
        <input id="homie-filter" placeholder="Search homies..." />
        <div id="homie-roster"></div>
    </div>
</div>

<!-- ------------------------------------------------------------
     PANEL 3 — ABILITY FORGE (Manual + AI)
------------------------------------------------------------ -->
<div class="panel" data-panel="3">
    <h2>Panel 3 – Ability Cards (Manual & AI)</h2>

    <div class="subpanel">
        <h3>Create / Forge Ability</h3>

        <label>Ability Name</label>
        <input id="ability-name" />

        <label>Assign To:</label>
        <select id="ability-assign-target">
            <option value="">General / Party</option>
        </select>

        <label>Action Type</label>
        <input id="ability-action" placeholder="Action, Bonus Action, Reaction…" />

        <label>Range</label>
        <input id="ability-range" />

        <label>Target</label>
        <input id="ability-target" />

        <label>Save / DC</label>
        <input id="ability-dc" placeholder="Ex: Wis save DC 18" />

        <label>Damage Dice</label>
        <input id="ability-dmg" placeholder="Ex: 6d10 necrotic + 4d8 thunder" />

        <label>Power Level (1–10)</label>
        <input id="ability-power" type="number" />

        <label>Optional SPU Cost</label>
        <input id="ability-spu" type="number" />

        <label>Effect Notes</label>
        <textarea id="ability-effect"></textarea>

        <label>Mechanical Effect</label>
        <textarea id="ability-mech"></textarea>

        <label>Combo / Interaction Notes</label>
        <textarea id="ability-combo"></textarea>

        <div class="divider"></div>

        <button id="btn-ability-manual" class="btn">Create Ability Manually</button>
        <button id="btn-ability-ai" class="btn-secondary">Generate via AI</button>
    </div>

    <div class="subpanel">
        <h3>Ability List</h3>
        <input id="ability-filter" placeholder="Search abilities…"/>
        <div id="ability-list"></div>
    </div>
</div>

<!-- ------------------------------------------------------------
     PANEL 4 — DOMAINS & TERRITORIES + AI LAIR ACTIONS
------------------------------------------------------------ -->
<div class="panel" data-panel="4">
    <h2>Panel 4 – Domains & Territories</h2>

    <div class="subpanel">
        <h3>Create Domain</h3>

        <label>Domain Name</label>
        <input id="domain-name" />

        <label>Domain Tier (1–10)</label>
        <input id="domain-tier" type="number"/>

        <label>SPU Invested</label>
        <input id="domain-spu" type="number"/>

        <label>Passive Fear DC</label>
        <input id="domain-dc" type="number"/>

        <label>Territory Size / Range</label>
        <input id="domain-range" placeholder="Ex: 100 miles"/>

        <label>Environmental Personality</label>
        <textarea id="domain-personality"></textarea>

        <label>Lair Actions (manual)</label>
        <textarea id="domain-lairs"></textarea>

        <div class="divider"></div>

        <button id="btn-create-domain" class="btn-secondary">Create Domain</button>
    </div>

    <div class="subpanel">
        <h3>Domain Roster</h3>

        <input id="domain-filter" placeholder="Search domains…" />
        <div id="domain-list"></div>
    </div>

    <div class="subpanel">
        <h3>AI Lair Action Generator</h3>

        <label>Select Domain</label>
        <select id="ai-domain-target"></select>

        <label>Concept / Flavor</label>
        <textarea id="ai-domain-concept"></textarea>

        <label>Power Level (1–10)</label>
        <input id="ai-domain-power" type="number" />

        <label>Number of Actions</label>
        <input id="ai-domain-count" type="number" />

        <button id="btn-generate-domain-ai" class="btn-secondary">Generate Lair Actions</button>

        <div id="ai-domain-output"></div>
    </div>
</div>

<!-- ------------------------------------------------------------
     PANEL 5 — PLAYABLE VIEW (HOMIES + DOMAINS + ABILITIES)
------------------------------------------------------------ -->
<div class="panel" data-panel="5">
    <h2>Panel 5 – Playable View (Live Session Mode)</h2>

    <div class="subpanel">
        <h3>Homies</h3>
        <div id="playable-homies"></div>
    </div>

    <div class="subpanel">
        <h3>Domains</h3>
        <div id="playable-domains"></div>
    </div>

    <div class="subpanel">
        <h3>All Abilities (Optional)</h3>
        <div id="playable-abilities"></div>
    </div>
</div>

</main>

<script src="script.js"></script>

</body>
</html>
