<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Soul-Soul Fruit Control Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Global error / success banner -->
  <div id="app-error-banner" class="error-banner hidden">
    <span id="app-error-text"></span>
    <button id="app-error-close" type="button">×</button>
  </div>

  <header class="app-header">
    <div class="header-inner">
      <div>
        <h1 class="app-title">Soul-Soul Fruit Control Panel</h1>
        <p class="app-subtitle">
          Big Mom–style soul harvesting, homie crafting, domains, abilities, and a combat dashboard.
        </p>
      </div>
      <!-- Top tab navigation -->
      <nav class="top-tabs" aria-label="Main sections">
        <button class="tab-button active" data-tab="souls">Souls</button>
        <button class="tab-button" data-tab="homies">Homies</button>
        <button class="tab-button" data-tab="abilities">Abilities</button>
        <button class="tab-button" data-tab="domains">Domains</button>
        <button class="tab-button" data-tab="playable">Playable View</button>
      </nav>
    </div>
  </header>

  <main class="app-main">
    <div class="app-main-inner">
      <!-- PANEL 1 – SOULS -->
      <section id="panel-souls" class="panel visible" aria-label="Souls panel">
        <h2 class="panel-title">Panel 1 – Soul Rating &amp; Soul Bank</h2>

        <div class="subpanel">
          <h3 class="subpanel-title">Core Soul Rating (No Math Brain Required)</h3>

          <div class="form-grid">
            <div class="form-row">
              <label for="soul-name">Creature Name</label>
              <input id="soul-name" type="text" placeholder="Ex: Kaido" />
            </div>

            <div class="form-row">
              <label for="soul-might">Raw Might (1–10)</label>
              <input id="soul-might" type="number" min="1" max="10" />
            </div>

            <div class="form-row">
              <label for="soul-tier">Proficiency Tier (0–9)</label>
              <select id="soul-tier">
                <option value="0">0 – Scrub</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7 – Yonko</option>
                <option value="8">8</option>
                <option value="9">9</option>
              </select>
            </div>

            <div class="form-row">
              <label for="soul-will">Willpower Level (1–10)</label>
              <input id="soul-will" type="number" min="1" max="10" />
            </div>

            <div class="form-row full">
              <label for="soul-tags">Traits / Tags (optional)</label>
              <input id="soul-tags" type="text" placeholder="Ex: cowardly, marine, zealot" />
            </div>

            <div class="form-row full">
              <label for="soul-notes">Soul Notes</label>
              <textarea
                id="soul-notes"
                rows="3"
                placeholder="Flavor, backstory, what broke their will, how they reacted…"
              ></textarea>
            </div>
          </div>

          <div class="derived-grid">
            <div>
              <div class="stat-label">Combined Rating</div>
              <div id="soul-rating" class="stat-value">0</div>
            </div>
            <div>
              <div class="stat-label">Level (SoL)</div>
              <div id="soul-level" class="stat-value">1</div>
            </div>
            <div>
              <div class="stat-label">Soul Energy (SPU)</div>
              <div id="soul-spu" class="stat-value">0</div>
            </div>
            <div>
              <div class="stat-label">Suggested Max HP Lost</div>
              <div id="soul-hp" class="stat-value">0</div>
            </div>
          </div>

          <div class="button-row">
            <button id="btn-recalc-soul" class="btn primary">Recalculate Soul Rating</button>
            <button id="btn-add-soul" class="btn accent">Add Soul to Bank</button>
          </div>
        </div>

        <div class="subpanel">
          <div class="subpanel-header">
            <h3 class="subpanel-title">Soul Bank</h3>
            <input
              id="soul-filter"
              class="filter-input"
              type="text"
              placeholder="Search souls by name or trait…"
            />
          </div>
          <div id="soul-bank-list" class="card-list"></div>
        </div>
      </section>

      <!-- PANEL 2 – HOMIES -->
      <section id="panel-homies" class="panel hidden" aria-label="Homies panel">
        <h2 class="panel-title">Panel 2 – Homies (Creation &amp; Roster)</h2>

        <div class="subpanel">
          <h3 class="subpanel-title">Create a Homie</h3>
          <div class="form-grid">
            <div class="form-row">
              <label for="homie-name">Homie Name</label>
              <input id="homie-name" type="text" placeholder="Ex: Panther" />
            </div>

            <div class="form-row">
              <label for="homie-type">Homie Type</label>
              <select id="homie-type">
                <option value="minor">Minor Homie</option>
                <option value="territory">Territory Homie</option>
                <option value="buff">Buff Homie</option>
                <option value="signature">Signature Homie (elite companion)</option>
              </select>
            </div>

            <div class="form-row">
              <label for="homie-linked-soul">Linked Soul (optional)</label>
              <select id="homie-linked-soul">
                <option value="">— None —</option>
              </select>
            </div>

            <div class="form-row">
              <label for="homie-spu">Initial SPU Investment</label>
              <input id="homie-spu" type="number" min="0" />
            </div>

            <div class="form-row full">
              <label for="homie-role">Role / Concept</label>
              <input id="homie-role" type="text" placeholder="Support, frontline bruiser, artillery…" />
            </div>

            <div class="form-row">
              <label for="homie-hp">HP (for combat / Signature Homies)</label>
              <input id="homie-hp" type="number" min="0" />
            </div>
            <div class="form-row">
              <label for="homie-ac">AC</label>
              <input id="homie-ac" type="number" min="0" />
            </div>
            <div class="form-row">
              <label for="homie-move">Movement</label>
              <input id="homie-move" type="number" min="0" placeholder="Ex: 30" />
            </div>

            <div class="form-row full">
              <label for="homie-attack">Primary Damage / Attack</label>
              <input id="homie-attack" type="text" placeholder="Ex: 1d12 slashing, 2d10 fire, etc." />
            </div>

            <div class="form-row full">
              <label for="homie-personality">Personality Traits (from souls used)</label>
              <input
                id="homie-personality"
                type="text"
                placeholder="Ex: arrogant, gluttonous, storm-obsessed, loyal…"
              />
            </div>

            <div class="form-row full">
              <label for="homie-location">Bound Location (Territory Homies)</label>
              <input
                id="homie-location"
                type="text"
                placeholder="Ex: Southern Gate of Montblanc City"
              />
            </div>

            <div class="form-row">
              <label for="homie-domain">Assigned Domain</label>
              <select id="homie-domain">
                <option value="">— None —</option>
              </select>
            </div>
          </div>

          <div class="button-row">
            <button id="btn-create-homie" class="btn accent">Create Homie</button>
          </div>
        </div>

        <div class="subpanel">
          <div class="subpanel-header">
            <h3 class="subpanel-title">Homie Roster</h3>
            <input
              id="homie-filter"
              class="filter-input"
              type="text"
              placeholder="Search homies…"
            />
          </div>
          <div id="homie-roster" class="card-list"></div>
        </div>
      </section>

      <!-- PANEL 3 – ABILITIES -->
      <section id="panel-abilities" class="panel hidden" aria-label="Abilities panel">
        <h2 class="panel-title">Panel 3 – Ability Cards (Manual &amp; AI)</h2>

        <div class="panel-grid">
          <!-- LEFT: Manual + AI generator -->
          <div class="panel-column">
            <div class="subpanel">
              <h3 class="subpanel-title">Manual Ability</h3>
              <div class="form-grid">
                <div class="form-row">
                  <label for="ability-name-input">Ability Name</label>
                  <input id="ability-name-input" type="text" />
                </div>

                <div class="form-row">
                  <label for="ability-power-input">Power Level (1–10)</label>
                  <input id="ability-power-input" type="number" min="1" max="10" />
                </div>

                <div class="form-row full">
                  <label for="ability-summary-input">Short Description</label>
                  <textarea
                    id="ability-summary-input"
                    rows="2"
                    placeholder="One-sentence summary of what this move does."
                  ></textarea>
                </div>

                <div class="form-row">
                  <label for="ability-action-input">Action</label>
                  <input id="ability-action-input" type="text" placeholder="Ex: Action, Bonus Action" />
                </div>

                <div class="form-row">
                  <label for="ability-range-input">Range</label>
                  <input id="ability-range-input" type="text" placeholder="Ex: 60 ft, self (30-ft aura)" />
                </div>

                <div class="form-row">
                  <label for="ability-target-input">Target</label>
                  <input id="ability-target-input" type="text" placeholder="Ex: One creature, 30-ft cone" />
                </div>

                <div class="form-row">
                  <label for="ability-save-input">Save / DC</label>
                  <input id="ability-save-input" type="text" placeholder="Ex: Dex save DC 18" />
                </div>

                <div class="form-row">
                  <label for="ability-damage-input">Damage</label>
                  <input id="ability-damage-input" type="text" placeholder="Ex: 6d10 necrotic + 4d8 thunder" />
                </div>

                <div class="form-row full">
                  <label for="ability-effect-input">Full Effect Description</label>
                  <textarea
                    id="ability-effect-input"
                    rows="4"
                    placeholder="Detailed effect text, including conditions, duration, extra riders, etc."
                  ></textarea>
                </div>

                <div class="form-row full">
                  <label for="ability-combo-input">Combo / Interaction Notes</label>
                  <textarea
                    id="ability-combo-input"
                    rows="3"
                    placeholder="How this interacts with Homies, Domains, or other abilities."
                  ></textarea>
                </div>

                <div class="form-row full">
                  <label for="ability-assign-select">Assign To</label>
                  <select id="ability-assign-select">
                    <option value="general">General / Party</option>
                    <!-- Homies and Domains will be injected here by JS -->
                  </select>
                </div>
              </div>

              <div class="button-row">
                <button id="btn-save-ability-manual" class="btn accent">Save Manual Ability</button>
              </div>
            </div>

            <div class="subpanel">
              <h3 class="subpanel-title">AI Ability Generator</h3>
              <div class="form-grid">
                <div class="form-row">
                  <label for="ai-ability-power-input">Power Level (1–10)</label>
                  <input id="ai-ability-power-input" type="number" min="1" max="10" value="7" />
                </div>

                <div class="form-row">
                  <label for="ai-ability-role-select">Role</label>
                  <select id="ai-ability-role-select">
                    <option value="offense">Offense</option>
                    <option value="defense">Defense</option>
                    <option value="support">Support</option>
                    <option value="control">Control</option>
                    <option value="utility">Utility</option>
                    <option value="reality">Reality-Bending</option>
                  </select>
                </div>

                <div class="form-row full">
                  <label for="ai-ability-concept-input">Concept / What You Want</label>
                  <textarea
                    id="ai-ability-concept-input"
                    rows="3"
                    placeholder="Ex: Vines erupt from the ground and restrain enemies, dealing damage if they move."
                  ></textarea>
                </div>

                <div class="form-row full">
                  <label for="ai-ability-assign-select">Assign To</label>
                  <select id="ai-ability-assign-select">
                    <option value="general">General / Party</option>
                    <!-- Homies and Domains will be injected here by JS -->
                  </select>
                </div>
              </div>

              <div class="button-row">
                <button id="btn-generate-ability-ai" class="btn primary">Generate Ability (AI)</button>
                <button id="btn-reroll-ability" class="btn secondary">Reroll Last</button>
              </div>
            </div>
          </div>

          <!-- RIGHT: Ability cards -->
          <div class="panel-column">
            <div class="subpanel">
              <div class="subpanel-header">
                <h3 class="subpanel-title">All Abilities</h3>
                <input
                  id="ability-filter"
                  class="filter-input"
                  type="text"
                  placeholder="Search abilities…"
                />
              </div>
              <div id="ability-card-list" class="card-list ability-card-list"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- PANEL 4 – DOMAINS & LAIR ACTIONS -->
      <section id="panel-domains" class="panel hidden" aria-label="Domains panel">
        <h2 class="panel-title">Panel 4 – Domains &amp; Lair Actions</h2>

        <div class="panel-grid">
          <!-- LEFT: Domain + AI lair generator -->
          <div class="panel-column">
            <div class="subpanel">
              <h3 class="subpanel-title">Create a Domain</h3>
              <div class="form-grid">
                <div class="form-row">
                  <label for="domain-name-input">Domain Name</label>
                  <input id="domain-name-input" type="text" placeholder="Ex: Wano" />
                </div>

                <div class="form-row">
                  <label for="domain-tier-input">Domain Tier (1–10)</label>
                  <input id="domain-tier-input" type="number" min="1" max="10" />
                </div>

                <div class="form-row">
                  <label for="domain-spu-input">SPU Invested</label>
                  <input id="domain-spu-input" type="number" min="0" />
                </div>

                <div class="form-row">
                  <label for="domain-feardc-input">Passive Fear DC (entering enemies)</label>
                  <input id="domain-feardc-input" type="number" min="0" />
                </div>

                <div class="form-row full">
                  <label for="domain-range-input">Territory Size / Range</label>
                  <input id="domain-range-input" type="text" placeholder="Ex: 100 miles" />
                </div>

                <div class="form-row full">
                  <label for="domain-personality-input">Environmental Personality</label>
                  <textarea
                    id="domain-personality-input"
                    rows="3"
                    placeholder="Ex: Heavily wooded land covered in living trees and foliage. The land consumes, drains soul energy from, and traps enemies."
                  ></textarea>
                </div>

                <div class="form-row full">
                  <label for="domain-notes-input">Domain Notes</label>
                  <textarea
                    id="domain-notes-input"
                    rows="2"
                    placeholder="Extra flavor, politics, who rules here, etc."
                  ></textarea>
                </div>

                <div class="form-row full">
                  <label for="domain-homies-select">Assign Territory Homies</label>
                  <select id="domain-homies-select" multiple></select>
                </div>
              </div>

              <div class="button-row">
                <button id="btn-save-domain" class="btn accent">Save Domain</button>
              </div>
            </div>

            <div class="subpanel">
              <h3 class="subpanel-title">AI Lair Action Generator</h3>
              <div class="form-grid">
                <div class="form-row">
                  <label for="ai-lair-domain-select">Domain</label>
                  <select id="ai-lair-domain-select">
                    <option value="">Select a domain…</option>
                  </select>
                </div>

                <div class="form-row">
                  <label for="ai-lair-power-input">Power Level (1–10)</label>
                  <input id="ai-lair-power-input" type="number" min="1" max="10" value="10" />
                </div>

                <div class="form-row">
                  <label for="ai-lair-count-input">Number of Lair Actions</label>
                  <input id="ai-lair-count-input" type="number" min="1" max="5" value="3" />
                </div>

                <div class="form-row full">
                  <label for="ai-lair-extra-input">Domain Personality / Extra Notes for AI</label>
                  <textarea
                    id="ai-lair-extra-input"
                    rows="3"
                    placeholder="Optional: Any extra flavor or requested themes beyond the domain description."
                  ></textarea>
                </div>
              </div>

              <div class="button-row">
                <button id="btn-generate-lair-ai" class="btn primary">Generate Lair Actions (AI)</button>
                <button id="btn-reroll-lair" class="btn secondary">Reroll Last Set</button>
              </div>
            </div>
          </div>

          <!-- RIGHT: Domain overview + lair cards -->
          <div class="panel-column">
            <div class="subpanel">
              <div class="subpanel-header">
                <h3 class="subpanel-title">Domains Overview</h3>
                <input
                  id="domain-filter"
                  class="filter-input"
                  type="text"
                  placeholder="Filter domains…"
                />
              </div>
              <div id="domain-list" class="card-list"></div>
            </div>

            <div class="subpanel">
              <div class="subpanel-header">
                <h3 class="subpanel-title">Lair Action Cards</h3>
                <input
                  id="lair-filter"
                  class="filter-input"
                  type="text"
                  placeholder="Filter lair actions…"
                />
              </div>
              <div id="lair-card-list" class="card-list ability-card-list"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- PANEL 5 – PLAYABLE VIEW -->
      <section id="panel-playable" class="panel hidden" aria-label="Playable view panel">
        <h2 class="panel-title">Panel 5 – Soul Party Dashboard (Playable View)</h2>

        <div class="subpanel">
          <h3 class="subpanel-title">Homies</h3>
          <div id="playable-homies" class="accordion-list"></div>
        </div>

        <div class="subpanel">
          <h3 class="subpanel-title">Domains</h3>
          <div id="playable-domains" class="accordion-list"></div>
        </div>

        <div class="subpanel">
          <h3 class="subpanel-title">All Abilities (Quick Reference)</h3>
          <div id="playable-abilities" class="accordion-list"></div>
        </div>
      </section>
    </div>
  </main>

  <script src="script.js"></script>
</body>
</html>
