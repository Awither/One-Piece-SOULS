<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Soul-Soul Fruit Workshop</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Global error banner -->
  <div id="app-error-banner" class="error-banner hidden">
    <span id="app-error-text"></span>
    <button id="app-error-close" type="button">X</button>
  </div>

  <div class="app-shell">
    <!-- Header -->
    <header class="app-header">
      <div class="app-title-row">
        <h1 class="app-title">Soul-Soul Fruit Control Panel</h1>
        <p class="app-subtitle">
          Big Mom–style soul harvesting, homie crafting, domains, abilities, and a combat dashboard.
        </p>
      </div>

      <!-- Top tabs -->
      <nav class="tab-strip">
        <button class="tab-button" data-panel="souls">Souls</button>
        <button class="tab-button" data-panel="homies">Homies</button>
        <button class="tab-button" data-panel="abilities">Abilities</button>
        <button class="tab-button" data-panel="domains">Domains</button>
        <button class="tab-button" data-panel="play">Playable View</button>
      </nav>
    </header>

    <main class="app-main">
      <!-- PANEL 1 – SOULS -->
      <section class="panel" data-panel-id="souls">
        <div class="panel-inner">
          <h2 class="panel-title">Panel 1 – Soul Rating &amp; Soul Bank</h2>

          <div class="panel-grid">
            <!-- Left: Soul rating form -->
            <div class="panel-grid-col">
              <div class="card">
                <div class="card-header-line">
                  <div class="card-title">Core Soul Rating (No Math Brain Required)</div>
                </div>
                <div class="card-body">
                  <div class="field">
                    <label for="soul-name">Creature Name</label>
                    <input id="soul-name" type="text" placeholder="Kaido" />
                  </div>

                  <div class="field-row">
                    <div class="field">
                      <label for="soul-might">Raw Might (1–10)</label>
                      <input id="soul-might" type="number" min="1" max="10" />
                    </div>
                    <div class="field">
                      <label for="soul-tier">Proficiency Tier (0–9)</label>
                      <select id="soul-tier">
                        <option value="0">0 – Scrub</option>
                        <option value="1">1 – Rookie</option>
                        <option value="2">2 – Rising Threat</option>
                        <option value="3">3 – Veteran</option>
                        <option value="4">4 – Elite</option>
                        <option value="5">5 – Warlord</option>
                        <option value="6">6 – Admiral</option>
                        <option value="7">7 – Yonko</option>
                        <option value="8">8 – Monster</option>
                        <option value="9">9 – Mythical</option>
                      </select>
                    </div>
                    <div class="field">
                      <label for="soul-will">Willpower Level (1–10)</label>
                      <input id="soul-will" type="number" min="1" max="10" />
                    </div>
                  </div>

                  <div class="field">
                    <label for="soul-tags">Traits / Tags (optional)</label>
                    <input id="soul-tags" type="text" placeholder="stubborn, marine, zealot" />
                  </div>

                  <div class="field">
                    <label for="soul-notes">Soul Notes</label>
                    <textarea id="soul-notes" rows="2"
                      placeholder="Flavor, backstory, what broke their will, how they reacted…"></textarea>
                  </div>

                  <div class="stats-row">
                    <div class="stat-box">
                      <div class="stat-label">Combined Rating</div>
                      <div class="stat-value" id="soul-rating">0</div>
                    </div>
                    <div class="stat-box">
                      <div class="stat-label">Level (SoL)</div>
                      <div class="stat-value" id="soul-level">1</div>
                    </div>
                    <div class="stat-box">
                      <div class="stat-label">Soul Energy (SPU)</div>
                      <div class="stat-value" id="soul-spu">0</div>
                    </div>
                    <div class="stat-box">
                      <div class="stat-label">Suggested Max HP Lost</div>
                      <div class="stat-value" id="soul-hp">2</div>
                    </div>
                  </div>
                </div>
                <div class="card-footer-row">
                  <button id="btn-recalc-soul" class="btn secondary" type="button">
                    Recalculate Soul Rating
                  </button>
                  <button id="btn-add-soul" class="btn primary" type="button">
                    Add Soul to Bank
                  </button>
                </div>
              </div>
            </div>

            <!-- Right: Soul bank list -->
            <div class="panel-grid-col">
              <div class="card">
                <div class="card-header-line">
                  <div class="card-title">Soul Bank</div>
                </div>
                <div class="card-body">
                  <div class="field">
                    <label for="soul-filter">Filter Souls</label>
                    <input id="soul-filter" type="text" placeholder="Search by name…" />
                  </div>
                  <div id="soul-bank-list" class="card-list"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- PANEL 2 – HOMIES -->
      <section class="panel" data-panel-id="homies">
        <div class="panel-inner">
          <h2 class="panel-title">Panel 2 – Homies (Creation &amp; Upgrades)</h2>

          <div class="panel-grid">
            <!-- Left column: Create Homie -->
            <div class="panel-grid-col">
              <div class="card">
                <div class="card-header-line">
                  <div class="card-title">Create a Homie</div>
                </div>
                <div class="card-body">
                  <div class="field">
                    <label for="homie-name">Homie Name</label>
                    <input id="homie-name" type="text" placeholder="Panther" />
                  </div>

                  <div class="field-row">
                    <div class="field">
                      <label for="homie-type">Homie Type</label>
                      <select id="homie-type">
                        <option value="Signature Homie">Signature Homie (elite companion)</option>
                        <option value="Territory Homie">Territory Homie</option>
                        <option value="Minor Homie">Minor Homie</option>
                        <option value="Buff Homie">Buff / Support Homie</option>
                      </select>
                    </div>
                    <div class="field">
                      <label for="homie-linked-soul">Linked Soul (optional)</label>
                      <select id="homie-linked-soul" data-soul-options>
                        <option value="">— None —</option>
                      </select>
                    </div>
                  </div>

                  <div class="field-row">
                    <div class="field">
                      <label for="homie-spu">Initial SPU Investment</label>
                      <input id="homie-spu" type="number" min="0" />
                    </div>
                    <div class="field">
                      <label for="homie-role">Role / Concept</label>
                      <input id="homie-role" type="text" placeholder="Support, artillery, healer…" />
                    </div>
                  </div>

                  <div class="field-row">
                    <div class="field">
                      <label for="homie-hp">HP</label>
                      <input id="homie-hp" type="number" />
                    </div>
                    <div class="field">
                      <label for="homie-ac">AC</label>
                      <input id="homie-ac" type="number" />
                    </div>
                    <div class="field">
                      <label for="homie-move">Movement</label>
                      <input id="homie-move" type="number" />
                    </div>
                  </div>

                  <div class="field">
                    <label for="homie-attack">Primary Damage / Attack</label>
                    <input id="homie-attack" type="text" placeholder="1d12 slashing, 2d10 fire, etc." />
                  </div>

                  <div class="field">
                    <label for="homie-personality">Personality Traits (from souls used)</label>
                    <input
                      id="homie-personality"
                      type="text"
                      placeholder="arrogant, gluttonous, storm-obsessed, loyal…"
                    />
                  </div>

                  <div class="field">
                    <label for="homie-location">Bound Location (Territory Homies)</label>
                    <input
                      id="homie-location"
                      type="text"
                      placeholder="Southern Gate of Montblanc City"
                    />
                  </div>

                  <div class="field-row">
                    <div class="field">
                      <label for="homie-domain">Assigned Domain</label>
                      <select id="homie-domain" data-domain-options>
                        <option value="">— None —</option>
                      </select>
                    </div>
                  </div>

                  <div class="field">
                    <label for="homie-support">Buff / Support Effects / Notes</label>
                    <textarea
                      id="homie-support"
                      rows="3"
                      placeholder="Healing aura, reroll saves, once-per-round advantage, temp HP, etc."
                    ></textarea>
                  </div>
                </div>
                <div class="card-footer-row">
                  <button id="btn-create-homie" class="btn primary" type="button">Create Homie</button>
                </div>
              </div>
            </div>

            <!-- Right column: roster -->
            <div class="panel-grid-col">
              <div class="card">
                <div class="card-header-line">
                  <div class="card-title">Homie Roster &amp; Upgrades</div>
                </div>
                <div class="card-body">
                  <div class="field">
                    <label for="homie-filter">Filter Homies</label>
                    <input id="homie-filter" type="text" placeholder="Search homies…" />
                  </div>
                  <div id="homie-roster-list" class="card-list"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- PANEL 3 – ABILITIES -->
      <section class="panel" data-panel-id="abilities">
        <div class="panel-inner">
          <h2 class="panel-title">Panel 3 – Ability Cards (Manual &amp; AI)</h2>

          <div class="panel-grid">
            <!-- Left: Manual + AI generators -->
            <div class="panel-grid-col">
              <!-- Manual ability -->
              <div class="card">
                <div class="card-header-line">
                  <div class="card-title">Manual Ability</div>
                </div>
                <div class="card-body">
                  <div class="field-row">
                    <div class="field">
                      <label for="manual-ability-name">Ability Name</label>
                      <input id="manual-ability-name" type="text" placeholder="Chaos" />
                    </div>
                    <div class="field">
                      <label for="manual-ability-power">Power (1–10)</label>
                      <input id="manual-ability-power" type="number" min="1" max="10" value="7" />
                    </div>
                  </div>

                  <div class="field">
                    <label for="manual-ability-short">Short Description (summary)</label>
                    <textarea
                      id="manual-ability-short"
                      rows="2"
                      placeholder="Vines erupt from the ground and restrain enemies…"
                    ></textarea>
                  </div>

                  <div class="field-row">
                    <div class="field">
                      <label for="manual-ability-action">Action Type</label>
                      <input id="manual-ability-action" type="text" placeholder="Action, Bonus Action, Reaction…" />
                    </div>
                    <div class="field">
                      <label for="manual-ability-range">Range</label>
                      <input id="manual-ability-range" type="text" placeholder="30 ft radius, 60 ft line…" />
                    </div>
                    <div class="field">
                      <label for="manual-ability-target">Target</label>
                      <input id="manual-ability-target" type="text" placeholder="Single creature, all enemies…" />
                    </div>
                  </div>

                  <div class="field-row">
                    <div class="field">
                      <label for="manual-ability-save">Save</label>
                      <input id="manual-ability-save" type="text" placeholder="Strength, Dex, Wis…" />
                    </div>
                    <div class="field">
                      <label for="manual-ability-dc">DC</label>
                      <input id="manual-ability-dc" type="number" />
                    </div>
                    <div class="field">
                      <label for="manual-ability-damage">Damage</label>
                      <input
                        id="manual-ability-damage"
                        type="text"
                        placeholder="6d10 necrotic, 4d8 fire + 4d8 thunder…"
                      />
                    </div>
                  </div>

                  <div class="field">
                    <label for="manual-ability-effect">Full Effect Description</label>
                    <textarea
                      id="manual-ability-effect"
                      rows="4"
                      placeholder="What happens on a failed save, half on success, conditions, battlefield changes, etc."
                    ></textarea>
                  </div>

                  <div class="field">
                    <label for="manual-ability-combo">Combo / Interaction Notes</label>
                    <textarea
                      id="manual-ability-combo"
                      rows="2"
                      placeholder="How this interacts with Homies, Domains, or other abilities."
                    ></textarea>
                  </div>

                  <div class="field">
                    <label for="manual-ability-assign">Assign To</label>
                    <select id="manual-ability-assign">
                      <option value="general">General / Party</option>
                      <!-- You can manually add homie:/domain: IDs once created, or we can automate later -->
                    </select>
                  </div>
                </div>
                <div class="card-footer-row">
                  <button id="btn-manual-ability-save" class="btn primary" type="button">
                    Save Ability
                  </button>
                </div>
              </div>

              <!-- AI ability -->
              <div class="card">
                <div class="card-header-line">
                  <div class="card-title">AI Ability Generator</div>
                </div>
                <div class="card-body">
                  <div class="field-row">
                    <div class="field">
                      <label for="ai-ability-power">Power Level (1–10)</label>
                      <input id="ai-ability-power" type="number" min="1" max="10" value="9" />
                    </div>
                    <div class="field">
                      <label for="ai-ability-role">Role</label>
                      <select id="ai-ability-role">
                        <option value="Offense">Offense</option>
                        <option value="Defense">Defense</option>
                        <option value="Support">Support</option>
                        <option value="Control">Control</option>
                        <option value="Utility">Utility</option>
                        <option value="Reality-Bending">Reality-Bending</option>
                      </select>
                    </div>
                  </div>

                  <div class="field">
                    <label for="ai-ability-prompt">Concept / What You Want</label>
                    <textarea
                      id="ai-ability-prompt"
                      rows="3"
                      placeholder="Vines erupt from the ground and restrain enemies while dealing psychic damage…"
                    ></textarea>
                  </div>

                  <div class="field">
                    <label for="ai-ability-assign">Assign To</label>
                    <select id="ai-ability-assign">
                      <option value="general">General / Party</option>
                    </select>
                  </div>
                </div>
                <div class="card-footer-row">
                  <button id="btn-ai-ability-generate" class="btn primary" type="button">
                    Generate Ability
                  </button>
                  <button id="btn-ai-ability-reroll" class="btn secondary" type="button">
                    Reroll Last
                  </button>
                </div>
              </div>
            </div>

            <!-- Right: Ability list -->
            <div class="panel-grid-col">
              <div class="card">
                <div class="card-header-line">
                  <div class="card-title">All Abilities</div>
                </div>
                <div class="card-body">
                  <div class="field">
                    <label for="ability-filter">Filter Abilities</label>
                    <input id="ability-filter" type="text" placeholder="Search abilities…" />
                  </div>
                  <div id="ability-list" class="card-list ability-card-list"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- PANEL 4 – DOMAINS & LAIR ACTIONS -->
      <section class="panel" data-panel-id="domains">
        <div class="panel-inner">
          <h2 class="panel-title">Panel 4 – Domains &amp; Lair Actions</h2>

          <div class="panel-grid">
            <!-- LEFT column: Create Domain + overview -->
            <div class="panel-grid-col">
              <div class="card">
                <div class="card-header-line">
                  <div class="card-title">Create a Domain</div>
                </div>
                <div class="card-body">
                  <div class="field-row">
                    <div class="field">
                      <label for="domain-name">Domain Name</label>
                      <input id="domain-name" type="text" placeholder="Wano" />
                    </div>
                    <div class="field">
                      <label for="domain-tier">Domain Tier (1–10)</label>
                      <input id="domain-tier" type="number" min="1" max="10" value="8" />
                    </div>
                    <div class="field">
                      <label for="domain-spu">SPU Invested</label>
                      <input id="domain-spu" type="number" min="0" />
                    </div>
                  </div>

                  <div class="field-row">
                    <div class="field">
                      <label for="domain-dc">Passive Fear DC (entering enemies)</label>
                      <input id="domain-dc" type="number" min="0" />
                    </div>
                    <div class="field">
                      <label for="domain-range">Territory Size / Range</label>
                      <input id="domain-range" type="text" placeholder="100 miles" />
                    </div>
                  </div>

                  <div class="field">
                    <label for="domain-personality">Environmental Personality</label>
                    <textarea
                      id="domain-personality"
                      rows="2"
                      placeholder="Heavily wooded land with living trees that consume, drain soul energy from, and trap enemies."
                    ></textarea>
                  </div>

                  <div class="field">
                    <label for="domain-notes">Domain Notes</label>
                    <textarea
                      id="domain-notes"
                      rows="2"
                      placeholder="Extra flavor, politics, who rules here, etc."
                    ></textarea>
                  </div>

                  <div class="field">
                    <label for="domain-homies">Assign Territory Homies</label>
                    <select id="domain-homies" data-homie-options multiple size="4"></select>
                    <p class="help-text">Hold Ctrl/Cmd to select multiple Territory Homies.</p>
                  </div>
                </div>
                <div class="card-footer-row">
                  <button id="btn-create-domain" class="btn primary" type="button">Save Domain</button>
                </div>
              </div>

              <div class="card">
                <div class="card-header-line">
                  <div class="card-title">Domains Overview</div>
                </div>
                <div class="card-body">
                  <div class="field">
                    <label for="domain-filter">Filter Domains</label>
                    <input id="domain-filter" type="text" placeholder="Search domains…" />
                  </div>
                  <div id="domain-list" class="card-list"></div>
                </div>
              </div>
            </div>

            <!-- RIGHT column: AI Lair generator + Lair cards -->
            <div class="panel-grid-col">
              <div class="card">
                <div class="card-header-line">
                  <div class="card-title">AI Lair Action Generator</div>
                </div>
                <div class="card-body">
                  <div class="field-row">
                    <div class="field">
                      <label for="lair-domain">Domain</label>
                      <select id="lair-domain" data-domain-options>
                        <option value="">Select a domain…</option>
                      </select>
                    </div>
                    <div class="field">
                      <label for="lair-power">Power Level (1–10)</label>
                      <input id="lair-power" type="number" min="1" max="10" value="10" />
                    </div>
                    <div class="field">
                      <label for="lair-count">Number of Lair Actions</label>
                      <input id="lair-count" type="number" min="1" max="5" value="3" />
                    </div>
                  </div>

                  <div class="field">
                    <label for="lair-prompt">Domain Personality / Extra Notes for AI</label>
                    <textarea
                      id="lair-prompt"
                      rows="3"
                      placeholder="Optional: any extra flavor or requested themes beyond the domain description."
                    ></textarea>
                  </div>
                </div>
                <div class="card-footer-row">
                  <button id="btn-lair-generate" class="btn primary" type="button">
                    Generate Lair Actions
                  </button>
                  <button id="btn-lair-reroll" class="btn secondary" type="button">
                    Reroll Last Set
                  </button>
                </div>
              </div>

              <div class="card">
                <div class="card-header-line">
                  <div class="card-title">Lair Action Cards</div>
                </div>
                <div class="card-body">
                  <div id="lair-card-list" class="card-list ability-card-list"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- PANEL 5 – PLAYABLE VIEW -->
      <section class="panel" data-panel-id="play">
        <div class="panel-inner">
          <h2 class="panel-title">Panel 5 – Soul Party Dashboard (Playable View)</h2>
          <p class="panel-description">
            Snapshot of your Homies, Domains, and key abilities. Use the dropdown-style accordions during play
            to quickly see stats and attacks.
          </p>

          <div class="card">
            <div class="card-header-line">
              <div class="card-title">Homies</div>
            </div>
            <div class="card-body">
              <div id="play-homies" class="accordion-list"></div>
            </div>
          </div>

          <div class="card">
            <div class="card-header-line">
              <div class="card-title">Domains</div>
            </div>
            <div class="card-body">
              <div id="play-domains" class="accordion-list"></div>
            </div>
          </div>

          <div class="card">
            <div class="card-header-line">
              <div class="card-title">All Abilities (Quick Reference)</div>
            </div>
            <div class="card-body">
              <div id="play-abilities" class="card-list ability-card-list"></div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script src="script.js"></script>
</body>
</html>
